```markdown
# Cursor 开发提示词：星空主题番茄钟

## 功能需求
### 核心机制
- 25分钟专注周期 + 5分钟休息循环
- 可视化粒子星空倒计时动画
- 完成阶段触发NASA音效(需CC0音频资源)
- 浏览器后台运行时保持计时精度

## 技术规范
### 定时器系统
```javascript
// 采用Web Worker保持计时精度
class StellarTimer {
  constructor() {
    this.worker = new Worker('timer.worker.js');
    this.phaseTypes = ['focus', 'break'];
  }

  // 星环进度动画
  _updateOrbitProgress(percent) {
    const orbit = document.getElementById('neutron-star-orbit');
    orbit.style.strokeDashoffset = 471 * (1 - percent); // 2πr=2*3.14*75=471
  }
}
```

### 视觉反馈系统
```css
/* 量子波动特效 */
@keyframes quantum-fluctuation {
  0% { filter: blur(0.5px); }
  50% { filter: blur(1.2px) hue-rotate(15deg); }
  100% { filter: blur(0.5px); }
}

.nebula-timer {
  background: radial-gradient(ellipse at center, 
    #0d1b2a 0%,
    #1b2735 40%,
    #2d3947 100%);
  animation: quantum-fluctuation 2s infinite;
}
```

### 数据存储架构
```javascript
// IndexedDB 模式升级
const dbUpgrade = (db) => {
  if (!db.objectStoreNames.contains('pomodoro')) {
    const store = db.createObjectStore('sessions', {
      keyPath: 'id',
      autoIncrement: true
    });
    
    store.createIndex('phaseType', 'phaseType', { unique: false });
    store.createIndex('completedAt', 'completedAt', { unique: false });
  }
};
```

## 交互设计
### 控制面板
```html
<div class="quantum-interface">
  <div id="neutron-star-orbit" class="pulsar-orbit"></div>
  <button id="stellar-control" 
          data-state="idle"
          aria-label="启动超新星引擎">
    <span class="supernova-icon"></span>
  </button>
  <div class="phase-display">
    <span id="current-phase">超维度聚焦</span>
    <div class="wormhole-progress"></div>
  </div>
</div>
```

### iOS风格提醒
```javascript
function showCelestialNotification() {
  if (!("Notification" in window)) return;

  Notification.requestPermission().then(perm => {
    if (perm === "granted") {
      new Notification("🪐 星环已完成", {
        body: "引力波稳定，可进入下一相位",
        vibrate: [200, 100, 200],
        icon: "/assets/neutrino.png"
      });
    }
  });
}
```

## 性能优化
1. 使用`requestIdleCallback`处理后台任务
2. Web Worker计时脚本需包含精度补偿算法
3. Canvas渲染采用离屏缓冲技术

## 测试要求
- 时基误差 ≤ ±500ms/24h
- 内存泄漏检测通过Chrome DevTools Memory面板
- 后台计时精度测试需覆盖iOS/Android主流机型

---

**提示词使用说明：**  
1. 输入`/生成 番茄钟核心逻辑` 获取Web Worker完整实现  
2. 使用`/优化 星空渲染性能` 触发Canvas渲染建议  
3. 输入`/测试 跨平台通知` 验证iOS/Android兼容性  
4. 通过`/审查 内存管理` 检测资源泄漏风险  

> 注意：所有视觉元素需通过`prefers-color-scheme`适配深空观测模式