# 星空应用系列 - 密码保护功能开发文档

## 功能概述

星空应用系列实现了一个简单但有效的密码保护机制，确保只有授权用户才能访问应用功能。密码验证使用客户端MD5哈希比对方式，验证通过后的状态通过SessionStorage存储，提供会话级别的访问控制。

## 技术实现

### 1. 密码哈希保护

为保护密码不被直接在代码中明文显示，我们使用了MD5哈希值存储和比对方式：

```javascript
// 设置密码的哈希值 (这里使用了"starsky"作为密码)
const correctHash = '5f1ed5fabffab2f9e387c536977c965f'; // MD5('starsky')

if (md5(input) === correctHash) {
    // 验证成功...
}
```

> 注意：在实际生产环境中，客户端哈希不是最安全的方法，更安全的做法是使用后端验证与HTTPS。但对于纯前端应用的学习目的，这种方法提供了基本的安全性。

### 2. 认证状态管理

用户成功认证后，我们使用SessionStorage存储认证状态，确保用户在当前浏览会话中不需要重复输入密码：

```javascript
// 存储认证状态
sessionStorage.setItem('authenticated', 'true');

// 检查认证状态
if (sessionStorage.getItem('authenticated') !== 'true') {
    window.location.href = 'index.html'; // 未认证则重定向到登录页
}
```

与LocalStorage不同，SessionStorage在用户关闭浏览器后会自动清除，提供了更好的安全性。

### 3. 登出功能

用户可以通过显式登出删除认证状态：

```javascript
// 登出函数
function logout() {
    sessionStorage.removeItem('authenticated');
    window.location.href = 'index.html';
}
```

## 集成到应用中

每个应用页面（星空记忆游戏和星空冥想时钟）都在页面加载时执行认证检查：

```javascript
// 页面加载时执行
window.onload = function() {
    checkAuth();
    // 其他初始化代码...
};

// 检查认证状态
function checkAuth() {
    if (sessionStorage.getItem('authenticated') !== 'true') {
        window.location.href = 'index.html';
    }
}
```

## 安全性考虑

1. **客户端验证限制**：此实现依赖客户端JavaScript进行密码验证，技术熟练的用户可以绕过验证。在需要真正安全保护的场景中，应使用服务器端验证。

2. **哈希算法**：MD5不再被认为是安全的哈希算法，在生产环境中应使用更强大的算法如SHA-256或bcrypt。

3. **安全存储**：SessionStorage虽然比LocalStorage更安全，但仍可能受到XSS攻击。重要数据应在服务器端加密存储。

## 如何更改密码

如需更改密码，请按以下步骤操作：

1. 使用MD5工具生成新密码的哈希值（可使用在线MD5哈希生成器）
2. 在index.html文件中找到以下代码行：
   ```javascript
   const correctHash = '5f1ed5fabffab2f9e387c536977c965f'; // MD5('starsky')
   ```
3. 将哈希值替换为新密码的MD5哈希值
4. 保存文件后，新密码将立即生效

## 当前密码信息

- 当前密码：`starsky`
- 当前哈希值：`5f1ed5fabffab2f9e387c536977c965f`